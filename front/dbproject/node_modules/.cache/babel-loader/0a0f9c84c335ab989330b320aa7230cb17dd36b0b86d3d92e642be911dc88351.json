{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  data() {\n    return {\n      searchData: {\n        police_number: \"\",\n        name: \"\",\n        year: \"\",\n        // 存储年份\n        month: \"\",\n        // 存储月份\n        station: \"\",\n        showResults: false,\n        // 控制是否显示搜索结果\n        searchResults: [] // 存储搜索结果\n      },\n\n      years: [\"2023\", \"2022\", \"2021\"],\n      // 年份选项\n      months: [{\n        value: \"01\",\n        label: \"一月\"\n      }, {\n        value: \"02\",\n        label: \"二月\"\n      }, {\n        value: \"03\",\n        label: \"三月\"\n      }, {\n        value: \"04\",\n        label: \"四月\"\n      }, {\n        value: \"05\",\n        label: \"五月\"\n      }, {\n        value: \"06\",\n        label: \"六月\"\n      }, {\n        value: \"07\",\n        label: \"七月\"\n      }, {\n        value: \"08\",\n        label: \"八月\"\n      }, {\n        value: \"09\",\n        label: \"九月\"\n      }, {\n        value: \"10\",\n        label: \"十月\"\n      }, {\n        value: \"11\",\n        label: \"十一月\"\n      }, {\n        value: \"12\",\n        label: \"十二月\"\n      }\n      // ... 还可以继续添加其他月份\n      ],\n\n      employeeData: {\n        police_number_receive: \"\",\n        basic_amount: \"\",\n        reward_amount: \"\",\n        description: \"\"\n      }\n    };\n  },\n  methods: {\n    search() {\n      // 在这里执行搜索操作\n      // 检查 searchData 中至少有一个字段非空\n      if (!this.searchData.police_number && !this.searchData.name && !this.searchData.year && !this.searchData.month && !this.searchData.station) {\n        alert(\"搜索条件不足！\");\n        return;\n      }\n\n      // 这里可以发送搜索请求，使用 searchData 中的值来过滤数据\n      const token = localStorage.getItem(\"token\");\n\n      // 设置Axios请求的headers，包括Authorization头部\n      const headers = {\n        Authorization: `Bearer ${token}`\n      };\n\n      // 使用axios发送数据到后端，并在headers中包含Token\n      axios.post(\"http://localhost:7078/searchWagesRecord\", this.searchData, {\n        headers\n      }).then(response => {\n        // 处理后端返回的数据\n\n        this.searchResults = response.data.map(result => {\n          let newResult = {};\n          for (let key in result) {\n            newResult[key.toUpperCase()] = result[key];\n          }\n          return newResult;\n        });\n\n        // 显示搜索结果区域\n        this.showResults = true;\n      }).catch(error => {\n        // 处理请求错误\n        console.error(\"请求错误:\", error); // 隐藏搜索结果区域\n        this.showResults = false;\n        // 显示错误消息\n        alert(\"请求错误，请稍后重试\");\n      });\n    },\n    submitForm() {\n      // 从localStorage中获取Token\n      const token = localStorage.getItem(\"token\");\n\n      // 设置Axios请求的headers，包括Authorization头部\n      const headers = {\n        Authorization: `Bearer ${token}`\n      };\n\n      // 使用axios发送数据到后端，并在headers中包含Token\n      axios.post(\"http://localhost:7078/salary_newRecord\", this.employeeData, {\n        headers\n      }).then(response => {\n        // 处理响应\n        console.log(response.data);\n      }).catch(error => {\n        // 处理错误\n        console.error(error);\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","data","searchData","police_number","name","year","month","station","showResults","searchResults","years","months","value","label","employeeData","police_number_receive","basic_amount","reward_amount","description","methods","search","alert","token","localStorage","getItem","headers","Authorization","post","then","response","map","result","newResult","key","toUpperCase","catch","error","console","submitForm","log"],"sources":["G:\\作业\\大二下\\数据库\\小学期\\My-front\\dbproject\\src\\components\\PoliceManagement\\PayrollManagement.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <form @submit.prevent=\"submitForm\">\r\n      <div class=\"form-group\">\r\n        <label for=\"id\">ID:</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"id\"\r\n          v-model=\"employeeData.police_number_receive\"\r\n          required\r\n        />\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"basicSalary\">基本工资:</label>\r\n        <input\r\n          type=\"number\"\r\n          id=\"basicSalary\"\r\n          v-model=\"employeeData.basic_amount\"\r\n          required\r\n        />\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"bonus\">奖金:</label>\r\n        <input\r\n          type=\"number\"\r\n          id=\"bonus\"\r\n          v-model=\"employeeData.reward_amount\"\r\n          required\r\n        />\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"description\">描述:</label>\r\n        <textarea\r\n          id=\"description\"\r\n          v-model=\"employeeData.description\"\r\n        ></textarea>\r\n      </div>\r\n      <button type=\"submit\">确认</button>\r\n    </form>\r\n  </div>\r\n\r\n  <div>\r\n    <form @submit.prevent=\"submitForm\">\r\n      <div class=\"form-group\">\r\n        <label for=\"id\">ID:</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"id\"\r\n          v-model=\"employeeData.police_number_receive\"\r\n          required\r\n        />\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"basicSalary\">基本工资:</label>\r\n        <input\r\n          type=\"number\"\r\n          id=\"basicSalary\"\r\n          v-model=\"employeeData.basic_amount\"\r\n          required\r\n        />\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"bonus\">奖金:</label>\r\n        <input\r\n          type=\"number\"\r\n          id=\"bonus\"\r\n          v-model=\"employeeData.reward_amount\"\r\n          required\r\n        />\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"description\">描述:</label>\r\n        <textarea\r\n          id=\"description\"\r\n          v-model=\"employeeData.description\"\r\n        ></textarea>\r\n      </div>\r\n      <button type=\"submit\">确认</button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      searchData: {\r\n        police_number: \"\",\r\n        name: \"\",\r\n        year: \"\", // 存储年份\r\n        month: \"\", // 存储月份\r\n        station: \"\",\r\n        showResults: false, // 控制是否显示搜索结果\r\n        searchResults: [], // 存储搜索结果\r\n      },\r\n      years: [\"2023\", \"2022\", \"2021\"], // 年份选项\r\n      months: [\r\n        { value: \"01\", label: \"一月\" },\r\n        { value: \"02\", label: \"二月\" },\r\n        { value: \"03\", label: \"三月\" },\r\n        { value: \"04\", label: \"四月\" },\r\n        { value: \"05\", label: \"五月\" },\r\n        { value: \"06\", label: \"六月\" },\r\n        { value: \"07\", label: \"七月\" },\r\n        { value: \"08\", label: \"八月\" },\r\n        { value: \"09\", label: \"九月\" },\r\n        { value: \"10\", label: \"十月\" },\r\n        { value: \"11\", label: \"十一月\" },\r\n        { value: \"12\", label: \"十二月\" },\r\n        // ... 还可以继续添加其他月份\r\n      ],\r\n      employeeData: {\r\n        police_number_receive: \"\",\r\n        basic_amount: \"\",\r\n        reward_amount: \"\",\r\n        description: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    search() {\r\n      // 在这里执行搜索操作\r\n      // 检查 searchData 中至少有一个字段非空\r\n      if (\r\n        !this.searchData.police_number &&\r\n        !this.searchData.name &&\r\n        !this.searchData.year &&\r\n        !this.searchData.month &&\r\n        !this.searchData.station\r\n      ) {\r\n        alert(\"搜索条件不足！\");\r\n        return;\r\n      }\r\n\r\n      // 这里可以发送搜索请求，使用 searchData 中的值来过滤数据\r\n      const token = localStorage.getItem(\"token\");\r\n\r\n      // 设置Axios请求的headers，包括Authorization头部\r\n      const headers = {\r\n        Authorization: `Bearer ${token}`,\r\n      };\r\n\r\n      // 使用axios发送数据到后端，并在headers中包含Token\r\n      axios\r\n        .post(\"http://localhost:7078/searchWagesRecord\", this.searchData, {\r\n          headers,\r\n        })\r\n        .then((response) => {\r\n          // 处理后端返回的数据\r\n\r\n          this.searchResults = response.data.map((result) => {\r\n            let newResult = {};\r\n            for (let key in result) {\r\n              newResult[key.toUpperCase()] = result[key];\r\n            }\r\n            return newResult;\r\n          });\r\n\r\n          // 显示搜索结果区域\r\n          this.showResults = true;\r\n        })\r\n        .catch((error) => {\r\n          // 处理请求错误\r\n          console.error(\"请求错误:\", error); // 隐藏搜索结果区域\r\n          this.showResults = false;\r\n          // 显示错误消息\r\n          alert(\"请求错误，请稍后重试\");\r\n        });\r\n    },\r\n    submitForm() {\r\n      // 从localStorage中获取Token\r\n      const token = localStorage.getItem(\"token\");\r\n\r\n      // 设置Axios请求的headers，包括Authorization头部\r\n      const headers = {\r\n        Authorization: `Bearer ${token}`,\r\n      };\r\n\r\n      // 使用axios发送数据到后端，并在headers中包含Token\r\n      axios\r\n        .post(\"http://localhost:7078/salary_newRecord\", this.employeeData, {\r\n          headers,\r\n        })\r\n        .then((response) => {\r\n          // 处理响应\r\n          console.log(response.data);\r\n        })\r\n        .catch((error) => {\r\n          // 处理错误\r\n          console.error(error);\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* 样式可以根据你的需求进行自定义 */\r\n.form-group {\r\n  margin-bottom: 15px;\r\n}\r\nlabel {\r\n  font-weight: bold;\r\n}\r\ntextarea {\r\n  height: 100px;\r\n}\r\nbutton {\r\n  background-color: #007bff;\r\n  color: #fff;\r\n  padding: 10px 20px;\r\n  border: none;\r\n  cursor: pointer;\r\n}\r\nbutton:hover {\r\n  background-color: #0056b3;\r\n}\r\n</style>\r\n"],"mappings":"AAmFA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,UAAU,EAAE;QACVC,aAAa,EAAE,EAAE;QACjBC,IAAI,EAAE,EAAE;QACRC,IAAI,EAAE,EAAE;QAAE;QACVC,KAAK,EAAE,EAAE;QAAE;QACXC,OAAO,EAAE,EAAE;QACXC,WAAW,EAAE,KAAK;QAAE;QACpBC,aAAa,EAAE,EAAE,CAAE;MACrB,CAAC;;MACDC,KAAK,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC;MAAE;MACjCC,MAAM,EAAE,CACN;QAAEC,KAAK,EAAE,IAAI;QAAEC,KAAK,EAAE;MAAK,CAAC,EAC5B;QAAED,KAAK,EAAE,IAAI;QAAEC,KAAK,EAAE;MAAK,CAAC,EAC5B;QAAED,KAAK,EAAE,IAAI;QAAEC,KAAK,EAAE;MAAK,CAAC,EAC5B;QAAED,KAAK,EAAE,IAAI;QAAEC,KAAK,EAAE;MAAK,CAAC,EAC5B;QAAED,KAAK,EAAE,IAAI;QAAEC,KAAK,EAAE;MAAK,CAAC,EAC5B;QAAED,KAAK,EAAE,IAAI;QAAEC,KAAK,EAAE;MAAK,CAAC,EAC5B;QAAED,KAAK,EAAE,IAAI;QAAEC,KAAK,EAAE;MAAK,CAAC,EAC5B;QAAED,KAAK,EAAE,IAAI;QAAEC,KAAK,EAAE;MAAK,CAAC,EAC5B;QAAED,KAAK,EAAE,IAAI;QAAEC,KAAK,EAAE;MAAK,CAAC,EAC5B;QAAED,KAAK,EAAE,IAAI;QAAEC,KAAK,EAAE;MAAK,CAAC,EAC5B;QAAED,KAAK,EAAE,IAAI;QAAEC,KAAK,EAAE;MAAM,CAAC,EAC7B;QAAED,KAAK,EAAE,IAAI;QAAEC,KAAK,EAAE;MAAM;MAC5B;MAAA,CACD;;MACDC,YAAY,EAAE;QACZC,qBAAqB,EAAE,EAAE;QACzBC,YAAY,EAAE,EAAE;QAChBC,aAAa,EAAE,EAAE;QACjBC,WAAW,EAAE;MACf;IACF,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,MAAMA,CAAA,EAAG;MACP;MACA;MACA,IACE,CAAC,IAAI,CAAClB,UAAU,CAACC,aAAY,IAC7B,CAAC,IAAI,CAACD,UAAU,CAACE,IAAG,IACpB,CAAC,IAAI,CAACF,UAAU,CAACG,IAAG,IACpB,CAAC,IAAI,CAACH,UAAU,CAACI,KAAI,IACrB,CAAC,IAAI,CAACJ,UAAU,CAACK,OAAM,EACvB;QACAc,KAAK,CAAC,SAAS,CAAC;QAChB;MACF;;MAEA;MACA,MAAMC,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;;MAE3C;MACA,MAAMC,OAAM,GAAI;QACdC,aAAa,EAAG,UAASJ,KAAM;MACjC,CAAC;;MAED;MACAtB,KAAI,CACD2B,IAAI,CAAC,yCAAyC,EAAE,IAAI,CAACzB,UAAU,EAAE;QAChEuB;MACF,CAAC,EACAG,IAAI,CAAEC,QAAQ,IAAK;QAClB;;QAEA,IAAI,CAACpB,aAAY,GAAIoB,QAAQ,CAAC5B,IAAI,CAAC6B,GAAG,CAAEC,MAAM,IAAK;UACjD,IAAIC,SAAQ,GAAI,CAAC,CAAC;UAClB,KAAK,IAAIC,GAAE,IAAKF,MAAM,EAAE;YACtBC,SAAS,CAACC,GAAG,CAACC,WAAW,CAAC,CAAC,IAAIH,MAAM,CAACE,GAAG,CAAC;UAC5C;UACA,OAAOD,SAAS;QAClB,CAAC,CAAC;;QAEF;QACA,IAAI,CAACxB,WAAU,GAAI,IAAI;MACzB,CAAC,EACA2B,KAAK,CAAEC,KAAK,IAAK;QAChB;QACAC,OAAO,CAACD,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC,EAAE;QAC/B,IAAI,CAAC5B,WAAU,GAAI,KAAK;QACxB;QACAa,KAAK,CAAC,YAAY,CAAC;MACrB,CAAC,CAAC;IACN,CAAC;IACDiB,UAAUA,CAAA,EAAG;MACX;MACA,MAAMhB,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;;MAE3C;MACA,MAAMC,OAAM,GAAI;QACdC,aAAa,EAAG,UAASJ,KAAM;MACjC,CAAC;;MAED;MACAtB,KAAI,CACD2B,IAAI,CAAC,wCAAwC,EAAE,IAAI,CAACb,YAAY,EAAE;QACjEW;MACF,CAAC,EACAG,IAAI,CAAEC,QAAQ,IAAK;QAClB;QACAQ,OAAO,CAACE,GAAG,CAACV,QAAQ,CAAC5B,IAAI,CAAC;MAC5B,CAAC,EACAkC,KAAK,CAAEC,KAAK,IAAK;QAChB;QACAC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACtB,CAAC,CAAC;IACN;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}